# گزارش جامع سیستم پشتیبانی - ارث‌کوپ

## تاریخ بررسی: 2024

---

## 1. وضعیت فعلی سیستم پشتیبانی

### 1.1. ساختار پایه‌ای موجود

#### ✅ **موارد موجود:**
- **مدل Ticket**: شامل فیلدهای `user_id`, `tracking_code`, `subject`, `message`, `status`, `priority`, `assignee_id`, `name`, `email`, `phone`
- **مدل TicketComment**: برای مدیریت پاسخ‌ها و نظرات روی تیکت‌ها
- **TicketController**: کنترلر مدیریت تیکت‌ها در پنل ادمین
- **ContactController**: کنترلر ایجاد تیکت از طریق فرم تماس
- **TicketTriageService**: سرویس تریاژ خودکار تیکت‌ها بر اساس کلمات کلیدی
- **TicketCreatedNotification**: نوتیفیکیشن ایمیل برای ایجاد تیکت

#### ✅ **امکانات فعلی:**
1. **ایجاد تیکت از طریق فرم تماس** (ContactController)
2. **مدیریت تیکت‌ها در پنل ادمین** (TicketController)
3. **تریاژ خودکار** بر اساس کلمات کلیدی
4. **اختصاص مسئول** به تیکت
5. **ارسال پاسخ** به تیکت
6. **بستن تیکت**
7. **جستجو و فیلتر** بر اساس وضعیت

---

## 2. مشکلات و نقاط ضعف

### 2.1. رابط کاربری (UI/UX)
- ❌ **UI قدیمی**: صفحات تیکت از استایل‌های قدیمی Bootstrap استفاده می‌کنند
- ❌ **عدم سازگاری با لایوت جدید**: صفحات تیکت نیاز به بازطراحی با Tailwind CSS و Dark Mode دارند
- ❌ **عدم وجود آمار و نمودار**: هیچ آماری از تیکت‌ها نمایش داده نمی‌شود
- ❌ **عدم وجود فیلترهای پیشرفته**: فقط فیلتر ساده بر اساس وضعیت وجود دارد

### 2.2. امکانات ناقص
- ❌ **عدم وجود صفحه ایجاد تیکت برای کاربران**: کاربران نمی‌توانند مستقیماً از پنل کاربری تیکت ایجاد کنند
- ❌ **عدم وجود صفحه مشاهده تیکت‌های کاربر**: کاربران نمی‌توانند تیکت‌های خود را ببینند
- ❌ **عدم وجود اولویت‌بندی بصری**: اولویت‌ها (priority) در UI نمایش داده نمی‌شوند
- ❌ **عدم وجود دسته‌بندی تیکت‌ها**: تیکت‌ها دسته‌بندی نمی‌شوند
- ❌ **عدم وجود ضمیمه (Attachment)**: امکان ارسال فایل در تیکت وجود ندارد
- ❌ **عدم وجود تاریخچه تغییرات**: تاریخچه تغییر وضعیت، مسئول و ... ثبت نمی‌شود
- ❌ **عدم وجود تگ (Tags)**: امکان تگ‌گذاری تیکت‌ها وجود ندارد
- ❌ **عدم وجود SLA**: سیستم مدیریت زمان پاسخ و حل تیکت وجود ندارد
- ❌ **عدم وجود Knowledge Base**: پایگاه دانش برای پاسخ سریع‌تر وجود ندارد
- ❌ **عدم وجود چت زنده (Live Chat)**: فقط سیستم تیکت وجود دارد

### 2.3. مشکلات فنی
- ❌ **عدم وجود Bulk Actions**: امکان انجام عملیات دسته‌ای روی تیکت‌ها وجود ندارد
- ❌ **عدم وجود Export**: امکان خروجی گرفتن از تیکت‌ها وجود ندارد
- ❌ **عدم وجود Real-time Updates**: به‌روزرسانی لحظه‌ای تیکت‌ها وجود ندارد
- ❌ **عدم وجود Email Integration**: یکپارچگی کامل با ایمیل وجود ندارد
- ❌ **عدم وجود API**: API برای یکپارچه‌سازی با سیستم‌های خارجی وجود ندارد

---

## 3. پیشنهادات بهبود

### 3.1. بهبودهای فوری (High Priority)

#### 1. بازطراحی UI صفحات تیکت
- **هدف**: هماهنگ‌سازی با لایوت جدید ادمین
- **اقدامات**:
  - بازطراحی `admin/tickets/index.blade.php` با Tailwind CSS
  - بازطراحی `admin/tickets/show.blade.php` با Tailwind CSS
  - افزودن Dark Mode
  - افزودن آمار و نمودار (تعداد تیکت‌های باز، در حال بررسی، بسته شده)
  - افزودن فیلترهای پیشرفته (تاریخ، اولویت، مسئول، کاربر)

#### 2. ایجاد پنل کاربری برای تیکت‌ها
- **هدف**: امکان مدیریت تیکت‌ها برای کاربران
- **اقدامات**:
  - ایجاد صفحه `user/tickets/index.blade.php` برای لیست تیکت‌های کاربر
  - ایجاد صفحه `user/tickets/create.blade.php` برای ایجاد تیکت جدید
  - ایجاد صفحه `user/tickets/show.blade.php` برای مشاهده تیکت و پاسخ‌ها
  - افزودن Route‌های مربوطه
  - افزودن Controller برای کاربران

#### 3. بهبود TicketController
- **هدف**: افزودن امکانات پیشرفته
- **اقدامات**:
  - افزودن Bulk Actions (بستن، حذف، تغییر وضعیت، اختصاص مسئول)
  - افزودن Export (CSV, Excel)
  - افزودن فیلترهای پیشرفته
  - افزودن آمار و نمودار
  - افزودن اولویت‌بندی بصری

### 3.2. بهبودهای متوسط (Medium Priority)

#### 4. سیستم ضمیمه (Attachments)
- **هدف**: امکان ارسال فایل در تیکت‌ها
- **اقدامات**:
  - ایجاد مدل `TicketAttachment`
  - افزودن امکان آپلود فایل در ایجاد تیکت
  - افزودن امکان آپلود فایل در پاسخ‌ها
  - نمایش فایل‌های ضمیمه در نمایش تیکت

#### 5. دسته‌بندی و تگ‌گذاری
- **هدف**: سازماندهی بهتر تیکت‌ها
- **اقدامات**:
  - افزودن فیلد `category` به مدل Ticket
  - افزودن جدول `ticket_tags` و `ticket_tag`
  - افزودن امکان انتخاب دسته و تگ در ایجاد تیکت
  - افزودن فیلتر بر اساس دسته و تگ

#### 6. تاریخچه تغییرات (Activity Log)
- **هدف**: ثبت تمام تغییرات تیکت
- **اقدامات**:
  - ایجاد مدل `TicketActivity`
  - ثبت تغییرات وضعیت، مسئول، اولویت
  - نمایش تاریخچه در صفحه نمایش تیکت

#### 7. سیستم SLA
- **هدف**: مدیریت زمان پاسخ و حل تیکت
- **اقدامات**:
  - افزودن فیلدهای `first_response_at`, `resolved_at` به Ticket
  - تعریف SLA بر اساس اولویت
  - نمایش هشدار برای تیکت‌های نزدیک به مهلت
  - گزارش عملکرد SLA

### 3.3. بهبودهای پیشرفته (Low Priority)

#### 8. Knowledge Base
- **هدف**: پایگاه دانش برای پاسخ سریع‌تر
- **اقدامات**:
  - ایجاد مدل `KnowledgeBaseArticle`
  - ایجاد صفحات مدیریت مقالات
  - جستجوی خودکار مقالات مرتبط هنگام ایجاد تیکت
  - پیشنهاد مقالات به کاربر

#### 9. چت زنده (Live Chat)
- **هدف**: ارتباط مستقیم با پشتیبانی
- **اقدامات**:
  - استفاده از WebSocket یا Pusher
  - ایجاد صفحه چت زنده
  - تبدیل چت به تیکت در صورت نیاز
  - مدیریت صف چت

#### 10. یکپارچه‌سازی ایمیل
- **هدف**: پاسخ به تیکت از طریق ایمیل
- **اقدامات**:
  - پیکربندی IMAP/POP3
  - تبدیل ایمیل به تیکت
  - ارسال پاسخ از طریق ایمیل
  - همگام‌سازی وضعیت

#### 11. API
- **هدف**: یکپارچه‌سازی با سیستم‌های خارجی
- **اقدامات**:
  - ایجاد API endpoints برای تیکت‌ها
  - احراز هویت API
  - مستندات API

---

## 4. صفحات نیازمند مهاجرت

### 4.1. صفحات تیکت
- ✅ `admin/tickets/index.blade.php` - استفاده از `layouts.admin` اما UI قدیمی
- ✅ `admin/tickets/show.blade.php` - استفاده از `layouts.admin` اما UI قدیمی

### 4.2. صفحات دیگر
- ❌ `admin/najm/index.blade.php` - هنوز از `layouts.app` استفاده می‌کند (نیاز به مهاجرت)

---

## 5. نقشه راه پیشنهادی

### فاز 1: بهبودهای فوری (1-2 هفته)
1. ✅ مهاجرت `admin/najm/index.blade.php`
2. ✅ بازطراحی UI صفحات تیکت در پنل ادمین
3. ✅ افزودن آمار و نمودار
4. ✅ افزودن Bulk Actions
5. ✅ افزودن فیلترهای پیشرفته

### فاز 2: پنل کاربری (1 هفته)
1. ✅ ایجاد صفحات تیکت برای کاربران
2. ✅ افزودن Route و Controller
3. ✅ یکپارچه‌سازی با پنل کاربری

### فاز 3: امکانات متوسط (2-3 هفته)
1. ✅ سیستم ضمیمه
2. ✅ دسته‌بندی و تگ‌گذاری
3. ✅ تاریخچه تغییرات
4. ✅ سیستم SLA

### فاز 4: امکانات پیشرفته (3-4 هفته)
1. ✅ Knowledge Base
2. ✅ چت زنده
3. ✅ یکپارچه‌سازی ایمیل
4. ✅ API

---

## 6. خلاصه

### نقاط قوت:
- ✅ ساختار پایه‌ای خوب
- ✅ سیستم تریاژ خودکار
- ✅ نوتیفیکیشن ایمیل
- ✅ مدیریت اولیه تیکت‌ها

### نقاط ضعف:
- ❌ UI قدیمی و نیازمند بازطراحی
- ❌ عدم وجود پنل کاربری
- ❌ امکانات محدود
- ❌ عدم وجود امکانات پیشرفته

### اولویت‌ها:
1. **فوری**: بازطراحی UI و افزودن پنل کاربری
2. **متوسط**: ضمیمه، دسته‌بندی، تاریخچه، SLA
3. **پیشرفته**: Knowledge Base، چت زنده، API

---

## 7. نتیجه‌گیری

سیستم پشتیبانی فعلی دارای ساختار پایه‌ای مناسبی است اما نیاز به بهبودهای اساسی در UI و افزودن امکانات دارد. با اجرای نقشه راه پیشنهادی، می‌توان به یک سیستم پشتیبانی کامل و پیشرفته دست یافت.

